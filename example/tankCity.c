/*settings*{"name":"tankcity","author":"Corax","image":[170,170,202,170,170,202,170,170,202,170,170,202,204,204,204,204,204,204,204,204,204,204,204,204,172,171,187,187,187,187,187,187,187,187,186,170,172,171,204,187,187,187,187,187,187,204,186,170,204,203,188,203,187,204,203,187,188,203,188,204,170,171,204,204,187,188,44,187,204,204,186,202,170,171,188,204,187,188,203,187,204,203,186,202,204,203,204,204,204,188,203,204,204,204,188,204,172,171,187,194,204,204,204,204,44,187,186,170,172,171,188,204,44,204,204,194,204,203,186,170,204,203,187,204,204,44,194,204,204,187,188,204,170,171,187,204,204,204,204,204,204,187,186,202,170,171,187,188,204,188,203,204,203,187,186,202,204,203,187,187,187,188,203,187,187,187,188,204,172,171,187,187,187,204,204,187,187,187,186,170,172,171,187,187,188,203,203,203,187,187,186,170]}*/
//8x32
char yellowTank[] = {0x78,0x78,0x78,0x70,0x78,0x78,0x78,0x70,0xc,0xcc,0x0,0x0,0x7c,0x88,0x77,0x77,0xcc,0x88,0xcc,0xcc,0xc,0xcc,0x0,0x0,0x78,0x78,0x78,0x70,0x78,0x78,0x78,0x70,0x87,0x87,0x87,0x80,0x87,0x87,0x87,0x80,0xc,0xcc,0x0,0x0,0x7c,0x88,0x77,0x77,0xcc,0x88,0xcc,0xcc,0xc,0xcc,0x0,0x0,0x87,0x87,0x87,0x80,0x87,0x87,0x87,0x80,0x0,0x7,0xc0,0x0,0x77,0x7,0xc0,0x77,0x88,0x7,0xc0,0x88,0x77,0x7,0xc0,0x77,0x88,0xc8,0x8c,0x88,0x77,0xc8,0x8c,0x77,0x88,0xcc,0xcc,0x88,0x77,0x7,0xc0,0x77,0x0,0x7,0xc0,0x0,0x88,0x7,0xc0,0x88,0x77,0x7,0xc0,0x77,0x88,0x7,0xc0,0x88,0x77,0xc8,0x8c,0x77,0x88,0xc8,0x8c,0x88,0x77,0xcc,0xcc,0x77,0x88,0x7,0xc0,0x88};
char grayTank[] = {0x1f,0x1f,0x1f,0x10,0x1f,0x1f,0x1f,0x10,0xc,0xcc,0x0,0x0,0x1c,0xff,0x11,0x11,0xcc,0xff,0xcc,0xcc,0xc,0xcc,0x0,0x0,0x1f,0x1f,0x1f,0x10,0x1f,0x1f,0x1f,0x10,0xf1,0xf1,0xf1,0xf0,0xf1,0xf1,0xf1,0xf0,0xc,0xcc,0x0,0x0,0x1c,0xff,0x11,0x11,0xcc,0xff,0xcc,0xcc,0xc,0xcc,0x0,0x0,0xf1,0xf1,0xf1,0xf0,0xf1,0xf1,0xf1,0xf0,0x0,0x1,0xc0,0x0,0x11,0x1,0xc0,0x11,0xff,0x1,0xc0,0xff,0x11,0x1,0xc0,0x11,0xff,0xcf,0xfc,0xff,0x11,0xcf,0xfc,0x11,0xff,0xcc,0xcc,0xff,0x11,0x1,0xc0,0x11,0x0,0x1,0xc0,0x0,0xff,0x1,0xc0,0xff,0x11,0x1,0xc0,0x11,0xff,0x1,0xc0,0xff,0x11,0xcf,0xfc,0x11,0xff,0xcf,0xfc,0xff,0x11,0xcc,0xcc,0x11,0xff,0x1,0xc0,0xff};
char bigTank[] = {0x1c,0x1c,0x1c,0x10,0xf,0xff,0x44,0x0,0xc,0x99,0xf4,0x0,0xc,0x4c,0x99,0x99,0xc,0x4c,0xcc,0xcc,0xc,0x99,0xf4,0x0,0xf,0xff,0x44,0x0,0x1c,0x1c,0x1c,0x10,0xc1,0xc1,0xc1,0xc0,0xf,0xff,0x44,0x0,0xc,0x99,0xf4,0x0,0xc,0x4c,0x99,0x99,0xc,0x4c,0xcc,0xcc,0xc,0x99,0xf4,0x0,0xf,0xff,0x44,0x0,0xc1,0xc1,0xc1,0xc0,0x0,0x9,0xc0,0x0,0x10,0x9,0xc0,0x1,0xc4,0x49,0xc4,0x4c,0x14,0xf9,0xcf,0x41,0xcf,0x9c,0xc9,0xfc,0x1f,0x94,0x49,0xf1,0xcf,0xcc,0xcc,0xfc,0x10,0x0,0x0,0x1,0x0,0x9,0xc0,0x0,0xc0,0x9,0xc0,0xc,0x14,0x49,0xc4,0x41,0xc4,0xf9,0xcf,0x4c,0x1f,0x9c,0xc9,0xf1,0xcf,0x94,0x49,0xfc,0x1f,0xcc,0xcc,0xf1,0xc0,0x0,0x0,0xc};

//8x8
char respawnspr[] = {0x0,0x0,0x0,0x0,0x0,0x7,0x0,0x0,0x0,0x7,0x0,0x0,0x0,0x77,0x70,0x0,0x77,0x77,0x77,0x70,0x0,0x77,0x70,0x0,0x0,0x7,0x0,0x0,0x0,0x7,0x0,0x0};
char shieldspr0[] = {0x1,0x0,0x0,0x10,0x10,0x10,0x1,0x1,0x1,0x1,0x10,0x10,0x0,0x10,0x1,0x0,0x0,0x10,0x1,0x0,0x1,0x1,0x10,0x10,0x10,0x10,0x1,0x1,0x1,0x0,0x0,0x10};
char shieldspr1[] = {0x0,0x1,0x11,0x0,0x0,0x1,0x1,0x0,0x1,0x10,0x0,0x11,0x1,0x0,0x0,0x1,0x1,0x0,0x0,0x1,0x1,0x10,0x0,0x11,0x0,0x1,0x1,0x0,0x0,0x1,0x11,0x0};
char bonusstar[] = {0x6,0x66,0x66,0x60,0x60,0x1,0xf0,0x6,0x60,0x11,0x1f,0x6,0x11,0x11,0x11,0x1f,0x60,0x11,0x1f,0x6,0x61,0x1f,0x11,0xf6,0x1f,0x0,0x0,0x1f,0x6,0x66,0x66,0x60};
char bonustimer[] = {0x6,0x6c,0xc6,0x60,0x60,0xc1,0x1c,0x6,0x6c,0x19,0x11,0xc6,0xc1,0x19,0x11,0x1c,0xc1,0x19,0x91,0x1c,0x6c,0x11,0x11,0xc6,0x60,0xc1,0x1c,0x6,0x6,0x6c,0xc6,0x60};
char bonusshovel[] = {0x6,0x66,0x66,0x10,0x60,0x0,0x0,0x11,0x60,0x0,0x1,0x6,0x60,0x10,0x10,0x6,0x61,0x14,0x0,0x6,0x61,0x4c,0xc0,0x6,0x6c,0xcc,0x0,0x6,0x6,0x66,0x66,0x60};
char bonusshield[] = {0x6,0x66,0x66,0x60,0x60,0x0,0x0,0x6,0x60,0x11,0xff,0x6,0x61,0x1f,0xff,0xf6,0x6c,0xcf,0xff,0xff,0x60,0xc,0xcc,0xcc,0x60,0x0,0x0,0x6,0x6,0x66,0x66,0x60};
int shieldspr[] = {shieldspr0, shieldspr1};

//10x10rle tile
char blackblock[] = {0x32,0xbb};
char redblock[] = {0x5,0x99,0x83,0xaa,0x9a,0x4,0xaa,0x82,0x9a,0x3,0xaa,0x5,0x99,0x3,0xaa,0x82,0x9a,0x4,0xaa,0x83,0x9a,0xaa,0x5,0x99,0x83,0xaa,0x9a,0x4,0xaa,0x82,0x9a,0x3,0xaa,0x5,0x99};
char grayblock[] = {0x5,0xcc,0x93,0xcf,0xff,0xbc,0xff,0xfb,0xcf,0xff,0xbc,0xff,0xfb,0xcf,0xff,0xbc,0xff,0xfb,0xcb,0xbb,0xbc,0x2,0xbb,0x5,0xcc,0x93,0xcf,0xff,0xbc,0xff,0xfb,0xcf,0xff,0xbc,0xff,0xfb,0xcf,0xff,0xbc,0xff,0xfb,0xcb,0xbb,0xbc,0x2,0xbb};
char greenblock[] = {0x89,0xb5,0x1d,0x51,0xf1,0xfb,0x57,0x17,0x1d,0x2,0x11,0x88,0xd1,0x51,0x71,0x17,0x5b,0x15,0xf1,0x2,0x71,0x9f,0xd1,0xb1,0x1d,0x15,0x1f,0x17,0x11,0x51,0x71,0x51,0x11,0x71,0x17,0x51,0x1d,0x17,0xdf,0x15,0x17,0x71,0x51,0x5d,0x71,0x11,0x1f,0x15,0xb5,0x51,0x71,0x51,0x7b};
char blueblock[] = {0x4,0x66,0x87,0x63,0x36,0x66,0x36,0x66,0x36,0x2,0x63,0x6,0x66,0x82,0x36,0x2,0x66,0x3,0x63,0x2,0x66,0x82,0x36,0x6,0x66,0x84,0x36,0x66,0x36,0x2,0x66,0x86,0x63,0x66,0x63,0x66,0x36,0x4,0x66,0x82,0x63,0x2,0x66};
char eagle[] = {0x92,0xb0,0x0,0xbb,0x0,0xb,0xbb,0x0,0xbc,0xb0,0xbb,0xbc,0xb0,0xbb,0xb,0xbc,0xbb,0xcb,0x2,0xbb,0x82,0xcb,0x5,0xbb,0x86,0xb,0xb0,0xbb,0xb,0xb0,0x2,0x0,0x82,0xbb,0x3,0x0,0x84,0xb,0xbb,0xc0,0x2,0x0,0x2,0xbb,0x83,0xbc,0x0,0x4,0xb,0x81,0xc0};

//4x3
char bullet[] = {0xcf,0xc0,0xf1,0xf0,0xcf,0xc0};

//16x16
char explosion0[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x0,0x0,0x1,0x0,0x0,0x0,0x0,0x0,0x10,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x1,0x0,0x11,0x0,0x0,0x0,0x0,0x0,0x10,0x21,0x21,0x11,0x10,0x0,0x0,0x0,0x0,0x12,0x11,0x0,0x0,0x0,0x0,0x0,0x11,0x12,0x12,0x10,0x0,0x0,0x0,0x1,0x0,0x21,0x0,0x1,0x0,0x0,0x0,0x0,0x1,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x10,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0};
char explosion1[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x10,0x0,0x10,0x0,0x1,0x0,0x0,0x0,0x1,0x0,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x10,0x1,0x1,0x0,0x0,0x0,0x0,0x0,0x1,0x0,0x10,0x1,0x0,0x0,0x0,0x0,0x10,0x0,0x20,0x0,0x0,0x0,0x0,0x1,0x2,0x0,0x1,0x10,0x1,0x0,0x0,0x1,0x1,0x2,0x0,0x10,0x0,0x1,0x11,0x11,0x22,0x0,0x12,0x11,0x11,0x10,0x0,0x1,0x0,0x20,0x21,0x0,0x0,0x0,0x0,0x1,0x10,0x0,0x11,0x1,0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x0,0x10,0x0,0x0,0x0,0x10,0x1,0x0,0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x0,0x0,0x0,0x0,0x0,0x10,0x0,0x1,0x0,0x0,0x0,0x0};
char explosion2[] = {0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x2,0x0,0x1,0x0,0x11,0x0,0x0,0x1,0x0,0x12,0x10,0x1,0x0,0x10,0x10,0x10,0x0,0x1,0x0,0x11,0x11,0x11,0x2,0x0,0x1,0x0,0x1,0x0,0x11,0x11,0x20,0x10,0x20,0x0,0x2,0x70,0x12,0x11,0x10,0x10,0x0,0x0,0x2,0x7,0x20,0x20,0x71,0x0,0x1,0x0,0x10,0x20,0x77,0x7,0x1,0x10,0x10,0x1,0x10,0x7,0x77,0x70,0x10,0x10,0x0,0x11,0x11,0x70,0x7,0x27,0x1,0x0,0x0,0x11,0x17,0x1,0x22,0x10,0x70,0x10,0x0,0x1,0x11,0x11,0x11,0x1,0x10,0x1,0x0,0x0,0x11,0x11,0x10,0x1,0x0,0x10,0x0,0x2,0x0,0x11,0x10,0x21,0x21,0x0,0x0,0x20,0x10,0x1,0x22,0x10,0x2,0x10,0x0,0x0,0x1,0x0,0x11,0x0,0x0,0x21};
int explosion[] = {explosion0, explosion1, explosion2};

//10x8
char flag[] = {0xba,0x0,0x0,0x0,0x0,0xba,0xaa,0x0,0x0,0x0,0xba,0xaa,0xaa,0x0,0x0,0xba,0xaa,0xaa,0xaa,0x0,0xba,0xaa,0xaa,0xaa,0xaa,0xb0,0x0,0x0,0x0,0x0,0xb0,0x0,0x0,0x0,0x0,0xb0,0x0,0x0,0x0,0x0};

//6x6
char life[] = {0x77,0x77,0x70,0x8a,0xa8,0x0,0xaa,0xaa,0x78,0xaa,0xaa,0x78,0x8a,0xa8,0x0,0x77,0x77,0x70};

//10x8rle
char grayico[] = {0x28,0xcc};
	
//8x5
char tankico[] = {0x0,0x44,0x44,0x44,0x0,0x4,0x99,0x40,0x9,0x99,0x99,0x90,0x0,0x4,0x99,0x40,0x0,0x44,0x44,0x44};

//22x15
char gameoverspr[] = {0x2,0x20,0x0,0x22,0x20,0x0,0x20,0x20,0x2,0x22,0x20,0x20,0x2,0x2,0x0,0x2,0x2,0x2,0x2,0x2,0x0,0x0,0x20,0x0,0x2,0x0,0x2,0x2,0x2,0x2,0x2,0x0,0x0,0x20,0x0,0x2,0x0,0x2,0x2,0x2,0x2,0x2,0x22,0x0,0x20,0x22,0x2,0x22,0x22,0x2,0x2,0x2,0x2,0x0,0x0,0x20,0x2,0x2,0x0,0x2,0x2,0x2,0x2,0x2,0x0,0x0,0x2,0x20,0x2,0x0,0x2,0x2,0x0,0x2,0x2,0x22,0x20,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x2,0x20,0x2,0x0,0x2,0x2,0x22,0x20,0x22,0x22,0x0,0x20,0x2,0x2,0x0,0x2,0x2,0x0,0x0,0x20,0x0,0x20,0x20,0x2,0x2,0x0,0x2,0x2,0x0,0x0,0x22,0x22,0x0,0x20,0x2,0x2,0x0,0x2,0x2,0x22,0x0,0x22,0x0,0x0,0x20,0x2,0x2,0x0,0x2,0x2,0x0,0x0,0x20,0x20,0x0,0x20,0x2,0x0,0x20,0x20,0x2,0x0,0x0,0x20,0x2,0x0,0x2,0x20,0x0,0x2,0x0,0x2,0x22,0x20,0x20,0x0,0x20};

//32x24rle
char name[] = {0x10,0x0,0x88,0xa1,0xaa,0xa1,0xa0,0x0,0xaa,0x1a,0x2,0x0,0x8f,0xaa,0x0,0x1a,0x0,0xaa,0x0,0x1a,0xa1,0xaa,0xa1,0xa0,0x0,0xaa,0x1a,0x2,0x0,0x88,0xaa,0x0,0x1a,0x0,0xaa,0x0,0x1a,0x3,0x11,0x83,0x10,0xa,0x2,0x11,0x94,0x10,0x0,0x11,0x10,0x11,0x0,0x11,0x1,0x11,0x0,0xa1,0xa0,0x0,0xa,0x10,0xa,0xa0,0x0,0xa1,0x2,0xaa,0x8f,0x0,0x1a,0xa,0xa1,0x0,0xa1,0xa0,0x0,0xa,0x10,0xa,0xa0,0x0,0xa1,0x2,0xaa,0x84,0x0,0x1a,0xaa,0x2,0x0,0x85,0x11,0x10,0x0,0x11,0x2,0x0,0x87,0x11,0x0,0x11,0x1,0x11,0x0,0x2,0x11,0x2,0x0,0x85,0xaa,0xa0,0x0,0xaa,0x2,0x0,0x8e,0xa1,0x0,0xaa,0x0,0x1a,0x0,0xaa,0x1,0xa0,0x0,0xaa,0xa0,0x0,0x3,0xaa,0x8f,0xa1,0x0,0xaa,0x0,0x1a,0x0,0xaa,0x1,0xa0,0x0,0x11,0x10,0x0,0x11,0x2,0x0,0x8f,0x11,0x0,0x11,0x0,0x11,0x0,0x11,0x0,0x11,0x0,0xa1,0xa0,0x0,0xaa,0x2,0x0,0x8a,0xaa,0x0,0xaa,0x0,0xaa,0x0,0xaa,0x0,0xaa,0x21,0x0,0xa3,0x1a,0xa0,0x0,0xaa,0x1a,0xaa,0x0,0xa1,0xaa,0xa1,0xa0,0xa,0x10,0x0,0xaa,0xa,0x1a,0xaa,0x0,0xaa,0x1a,0xaa,0x0,0xa1,0xaa,0xa1,0xa0,0xa,0x10,0x0,0xaa,0x11,0x10,0x11,0x2,0x0,0x82,0x11,0x3,0x0,0x89,0x11,0x10,0x0,0x1,0x10,0x0,0x11,0xaa,0x4,0x0,0x82,0xaa,0x3,0x0,0x89,0xa1,0xa0,0x0,0xa,0xa0,0x0,0xa1,0xaa,0x4,0x0,0x82,0xaa,0x3,0x0,0x89,0xa1,0xa0,0x0,0xa,0xa0,0x0,0xa1,0x11,0x4,0x0,0x82,0x11,0x3,0x0,0x83,0x11,0x10,0x2,0x0,0x2,0x11,0x83,0x10,0xaa,0x4,0x0,0x82,0x1a,0x3,0x0,0x83,0xaa,0xa0,0x2,0x0,0x85,0xaa,0x1a,0xa0,0xaa,0x4,0x0,0x82,0x1a,0x3,0x0,0x83,0xaa,0xa0,0x2,0x0,0x87,0xa,0x1a,0x0,0x11,0x10,0x11,0x2,0x0,0x82,0x11,0x3,0x0,0x83,0x11,0x10,0x2,0x0,0x88,0x1,0x11,0x0,0xa,0xaa,0x1a,0x0,0x3,0xaa,0x2,0x0,0x83,0xa1,0xa0,0x2,0x0,0x83,0xa,0xaa,0x2,0x0,0x84,0xaa,0x10,0x0,0x3,0xaa,0x2,0x0,0x83,0xa1,0xa0,0x2,0x0,0x83,0xa,0xaa,0x0};

//maps 12x12
char maps1[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x2,0x2,0x2,0x2,0x2,0x2,0x2,0x2,0x2,0x12,0x2,0x2,0x2,0x2,0x2,0x2,0x2,0x2,0x2,0x2,0x0,0x0,0x2,0x2,0x0,0x0,0x2,0x2,0x0,0x0,0x10,0x22,0x0,0x0,0x2,0x20,0x0,0x0,0x2,0x2,0x0,0x0,0x2,0x2,0x2,0x22,0x2,0x2,0x2,0x2,0x0,0x0,0x2,0x2,0x2,0x2,0x2,0x22,0x2,0x2,0x0,0x0,0x2,0xf2,0x0,0x0};
char maps2[] = {0x0,0x1,0x0,0x1,0x0,0x0,0x2,0x1,0x0,0x2,0x2,0x2,0x2,0x0,0x0,0x2,0x2,0x12,0x0,0x2,0x0,0x0,0x1,0x0,0x50,0x2,0x0,0x10,0x2,0x52,0x55,0x0,0x0,0x0,0x10,0x50,0x2,0x22,0x55,0x51,0x0,0x52,0x0,0x1,0x52,0x2,0x2,0x2,0x12,0x1,0x2,0x22,0x0,0x2,0x2,0x2,0x0,0x0,0x2,0x12,0x2,0x2,0x2,0x22,0x0,0x0,0x2,0x0,0x2,0xf2,0x2,0x2};
char maps3[] = {0x0,0x0,0x20,0x0,0x20,0x0,0x5,0x55,0x20,0x0,0x0,0x11,0x25,0x55,0x0,0x0,0x0,0x0,0x55,0x55,0x0,0x2,0x2,0x22,0x55,0x55,0x22,0x22,0x2,0x2,0x55,0x55,0x0,0x20,0x0,0x2,0x5,0x0,0x0,0x11,0x10,0x5,0x2,0x0,0x0,0x0,0x5,0x55,0x22,0x2,0x20,0x2,0x25,0x55,0x20,0x0,0x0,0x0,0x5,0x55,0x22,0x1,0x2,0x22,0x5,0x50,0x12,0x20,0x2,0xf2,0x2,0x0};
char maps4[] = {0x5,0x50,0x0,0x0,0x0,0x50,0x55,0x0,0x0,0x0,0x0,0x5,0x50,0x2,0x22,0x22,0x0,0x0,0x0,0x2,0x22,0x22,0x22,0x0,0x30,0x22,0x0,0x2,0x22,0x20,0x0,0x20,0x10,0x10,0x20,0x20,0x0,0x20,0x2,0x0,0x20,0x3,0x0,0x22,0x22,0x22,0x20,0x0,0x2,0x22,0x22,0x22,0x22,0x0,0x0,0x0,0x0,0x0,0x0,0x5,0x50,0x0,0x2,0x22,0x0,0x55,0x15,0x0,0x2,0xf2,0x5,0x51};
char maps5[] = {0x0,0x0,0x20,0x0,0x0,0x0,0x0,0x0,0x20,0x0,0x1,0x10,0x10,0x20,0x0,0x20,0x0,0x0,0x20,0x22,0x20,0x22,0x0,0x0,0x20,0x0,0x20,0x0,0x3,0x30,0x0,0x0,0x0,0x0,0x3,0x0,0x22,0x0,0x33,0x3,0x33,0x2,0x0,0x0,0x30,0x0,0x0,0x0,0x33,0x30,0x30,0x10,0x0,0x10,0x0,0x0,0x0,0x0,0x2,0x2,0x22,0x20,0x2,0x22,0x0,0x20,0x20,0x0,0x2,0xf2,0x0,0x0};
char maps6[] = {0x0,0x0,0x0,0x0,0x5,0x50,0x2,0x2,0x0,0x0,0x0,0x50,0x2,0x2,0x0,0x20,0x2,0x50,0x2,0x2,0x0,0x10,0x2,0x50,0x0,0x0,0x0,0x20,0x2,0x2,0x22,0x0,0x5,0x25,0x0,0x0,0x0,0x0,0x5,0x55,0x2,0x21,0x12,0x20,0x5,0x55,0x0,0x0,0x0,0x0,0x20,0x50,0x20,0x0,0x2,0x0,0x0,0x0,0x0,0x25,0x2,0x0,0x2,0x22,0x0,0x55,0x0,0x0,0x2,0xf2,0x0,0x55};
char maps7[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x10,0x0,0x0,0x0,0x10,0x0,0x10,0x0,0x50,0x11,0x10,0x1,0x0,0x5,0x10,0x0,0x10,0x0,0x0,0x51,0x10,0x0,0x0,0x1,0x5,0x11,0x10,0x10,0x0,0x0,0x1,0x10,0x0,0x11,0x0,0x10,0x0,0x10,0x11,0x10,0x0,0x0,0x0,0x0,0x11,0x50,0x10,0x1,0x10,0x0,0x15,0x1,0x10,0x1,0x1,0x2,0x22,0x1,0x0,0x0,0x0,0x2,0xf2,0x0,0x1};
char maps8[] = {0x0,0x20,0x0,0x0,0x2,0x0,0x52,0x22,0x2,0x0,0x2,0x0,0x55,0x50,0x0,0x2,0x2,0x0,0x53,0x33,0x33,0x33,0x33,0x2,0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x20,0x2,0x22,0x20,0x0,0x22,0x2,0x2,0x25,0x20,0x2,0x0,0x1,0x0,0x55,0x55,0x0,0x33,0x3,0x33,0x30,0x33,0x33,0x55,0x0,0x0,0x0,0x0,0x0,0x55,0x20,0x2,0x22,0x0,0x20,0x50,0x20,0x2,0xf2,0x0,0x0};
char maps9[] = {0x0,0x2,0x0,0x0,0x0,0x0,0x20,0x0,0x0,0x5,0x1,0x10,0x0,0x5,0x0,0x11,0x0,0x50,0x0,0x11,0x0,0x5,0x0,0x0,0x0,0x5,0x0,0x0,0x0,0x0,0x0,0x50,0x50,0x0,0x50,0x50,0x0,0x1,0x10,0x0,0x11,0x0,0x0,0x50,0x50,0x0,0x50,0x50,0x20,0x0,0x0,0x0,0x0,0x2,0x20,0x1,0x10,0x0,0x11,0x2,0x0,0x5,0x2,0x22,0x5,0x0,0x0,0x0,0x2,0xf2,0x0,0x0};
char maps10[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x22,0x0,0x0,0x2,0x20,0x2,0x0,0x20,0x50,0x20,0x2,0x20,0x0,0x25,0x15,0x20,0x2,0x20,0x2,0x33,0x33,0x32,0x2,0x22,0x22,0x11,0x21,0x12,0x22,0x22,0x22,0x10,0x20,0x12,0x22,0x2,0x22,0x22,0x22,0x22,0x20,0x0,0x22,0x21,0x12,0x22,0x0,0x25,0x55,0x55,0x55,0x55,0x52,0x20,0x55,0x2,0x22,0x5,0x2,0x0,0x2,0x2,0xf2,0x2,0x0};
char maps11[] = {0x0,0x0,0x10,0x2,0x2,0x20,0x2,0x22,0x20,0x2,0x0,0x0,0x0,0x0,0x20,0x2,0x20,0x55,0x2,0x0,0x0,0x1,0x5,0x55,0x2,0x22,0x22,0x12,0x25,0x51,0x0,0x0,0x10,0x2,0x5,0x50,0x2,0x22,0x1,0x55,0x55,0x50,0x0,0x1,0x0,0x55,0x55,0x20,0x12,0x55,0x55,0x51,0x55,0x20,0x2,0x55,0x0,0x0,0x0,0x20,0x0,0x50,0x2,0x22,0x2,0x20,0x0,0x55,0x2,0xf2,0x0,0x0};
char maps12[] = {0x0,0x0,0x0,0x0,0x22,0x0,0x2,0x22,0x20,0x0,0x2,0x0,0x0,0x0,0x20,0x20,0x0,0x2,0x3,0x33,0x33,0x2,0x0,0x2,0x0,0x0,0x3,0x2,0x1,0x2,0x20,0x22,0x23,0x33,0x3,0x22,0x0,0x0,0x13,0x0,0x3,0x0,0x33,0x30,0x33,0x0,0x3,0x0,0x0,0x0,0x0,0x0,0x3,0x30,0x22,0x20,0x0,0x0,0x0,0x0,0x0,0x20,0x2,0x22,0x2,0x20,0x0,0x0,0x2,0xf2,0x0,0x0};
char maps13[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x2,0x22,0x20,0x0,0x22,0x20,0x2,0x0,0x0,0x20,0x0,0x10,0x1,0x2,0x0,0x0,0x20,0x22,0x2,0x0,0x51,0x15,0x0,0x12,0x0,0x0,0x55,0x55,0x0,0x2,0x21,0x0,0x55,0x55,0x0,0x2,0x22,0x2,0x51,0x15,0x20,0x20,0x21,0x0,0x0,0x20,0x0,0x11,0x22,0x22,0x0,0x0,0x0,0x20,0x22,0x2,0x2,0x22,0x0,0x20,0x22,0x0,0x2,0xf2,0x0,0x0};
char maps14[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x55,0x0,0x2,0x22,0x0,0x55,0x50,0x0,0x22,0x22,0x20,0x5,0x0,0x2,0x25,0x25,0x22,0x0,0x0,0x2,0x55,0x25,0x52,0x0,0x50,0x2,0x22,0x22,0x22,0x5,0x55,0x0,0x25,0x25,0x20,0x55,0x33,0x30,0x22,0x22,0x23,0x33,0x0,0x0,0x20,0x20,0x20,0x0,0x1,0x0,0x0,0x0,0x0,0x10,0x0,0x0,0x2,0x22,0x0,0x0,0x11,0x0,0x2,0xf2,0x0,0x11};
char maps15[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x5,0x52,0x20,0x0,0x20,0x0,0x55,0x55,0x55,0x55,0x22,0x0,0x51,0x25,0x22,0x25,0x55,0x51,0x55,0x25,0x55,0x15,0x52,0x2,0x5,0x52,0x5,0x55,0x52,0x2,0x2,0x22,0x22,0x0,0x22,0x5,0x1,0x22,0x0,0x2,0x55,0x5,0x2,0x2,0x2,0x25,0x50,0x25,0x2,0x0,0x20,0x55,0x5,0x5,0x2,0x20,0x2,0x22,0x5,0x55,0x0,0x20,0x2,0xf2,0x5,0x50};
int maps[] = {maps1,maps2,maps3,maps4,maps5,maps6,maps7,maps8,maps9,maps10,maps11,maps12,maps13,maps14,maps15};
int endmap = 15;

char introsnd[] = "a:d=4,o=5,b=125:8a#,16p,16d#6,16f6,16g#6,8a#6,16p,16c#7,16c7,16g#6,8a#6,16p,16c#7,16c7,16g#6,8a#6,16p,8g#6,16c7,8f6,16p,8d#6,16p,8c#6,16d#6,8c6,16g#,8a#,16p,16d#6,16f6,16g#6,8a#6,16p,16c#7,16c7,16g#6,8a#6,16p,16c#7,16c7,16g#6,8a#6,16p,8g#6,16c7,8f6,16p,8d#6,16p,8c#6,16d#6,8c6,16g#,8c#6,16p,16f#6,16g#6,16b6,8c#7,16p,16f#7,16f7,16b6,8c#7,16p,16f#7,16f7,16b6,8c#7,16p,8b6,16d#7,8g#6,16p,8f#6,16p,8f6,16f#6,8d#6,16b,8c#6,16p,16f#6,16g#6,16b6,8c#7,16p,16f#7,16f7,16b6,8c#7,16p,16f#7,16f7,16b6,8c#7,16p,16b6,16a#7,16f#7,g#7";
char sound[] = "B:d=8,o=7,b=230:c6,d6,d#6,c6,d6,d#6,d#6,f6,g6,d#6,f6,g6,f6,g6,a6,f6,g6,a6,g#6,a#6,c,g#6,a#6,c,c,4p,c,c,c,c";
char track[] = "t:d=32,o=4,b=600:f,d,d,a,d,d,e,d,d";
char boom[] = "t:d=32,o=4,b=600:8a,a,a,a,a,a,a,a,4f,4f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a";
char bonussnd[] = "b:d=4,o=6,b=120:8g,8g7,16g7";
char endsnd[] = "e:d=8,o=5,b=70:16e,16e,f#,16e,e.,16d,d,16p,16d";

int map[144];
int tAngle[4];
int tPosition[4];

int isgame,key,frame,x,y,angle,power,tankCount,angartankCount,level,lifecount;
int respawntime,bonustime,getbonustime,thisbonus,stoptime,shield,score,nosound;
int scoreforlife,maxscore;

int testBlock(int x, int y){
	if(x > 0 && x < 120 && y > 9 && y < 128){
		if(map[((x/10) + ((y/10 - 1) * 12)))]){
			return 0;
		}
	}
	return 1;
}

int getBlock(int x, int y){
	if(x > 0 && x < 120 && y > 9 && y < 128){
		return map[((x/10) + ((y/10 - 1) * 12)))];
	}
	return 0;
}

int setBlock(int x, int y, int n){
	if(x > 0 && x < 120 && y > 9 && y < 128){
		map[((x/10) + ((y/10 - 1) * 12)))] = n;
		if(n >= 20){
			tPosition[n - 20] = ((x/10) + ((y/10 - 1) * 12)));
		}
	}
}

void drawRect(int x, int y){
	int i;
	setcolor(11);
	for(i = 0; i < 6; i++){
		line(x, y + i, x + 6, y + i);
	}
}

void fire(int n, int a, int x, int y){
	if(a == 0){
		putsprite(n,x + 8, y + 2);
		spritesetvalue(n,S_SPEEDX,8);
		spritesetvalue(n,S_SPEEDY,0);
	}
	else if(a == 1){
		putsprite(n,x + 3, y + 8);
		spritesetvalue(n,S_SPEEDX,0);
		spritesetvalue(n,S_SPEEDY,8);
	}
	else if(a == 2){
		putsprite(n,x - 3, y + 2);
		spritesetvalue(n,S_SPEEDX,-8);
		spritesetvalue(n,S_SPEEDY,0);
	}
	else if(a == 3){
		putsprite(n,x + 3, y - 3);
		spritesetvalue(n,S_SPEEDX,0);
		spritesetvalue(n,S_SPEEDY,-8);
	}
}

void drawBlock(int e, int x, int y){
	if(e == 0){
		putimagerle(blackblock, x*10, y*10, 10, 10);
	}
	else if(e == 1){
		putimagerle(grayblock, x*10, y*10, 10, 10);
	}
	else if(e == 2){
		putimagerle(redblock, x*10, y*10, 10, 10);
	}
	else if(e == 3){
		putimagerle(blueblock, x*10, y*10, 10, 10);
	}
	else if(e == 5){
		putimagerle(greenblock, x*10, y*10, 10, 10);
	}
	else if(e == 15){
		putimagerle(eagle, x*10, y*10, 10, 10);
	}
}

void drawLife(){
	int i;
	for(i = 0; i < 4; i++){
		putimagerle(grayico, 56 + i * 8, 1, 10, 8);
	}
	for(i = 0; i < lifecount; i++){
		putimage(life, 56 + i * 8, 1, 6, 6);
	}
}

void addScore(int s){
	score = score + s;
	if(score >= scoreforlife){
		scoreforlife = scoreforlife + 500;
		lifecount++;
		if(lifecount > 5){
			lifecount = 5;
		}
		drawLife();
	}
	gotoxy(16,0);
	printf("%d ", score);
}

void step(){
	frame = 1 - frame;
	key = getkey();
	if(key & KEY_UP){
		getsprite(1,yellowTank + (frame + 2) * 32);
		spritesetvalue(1,S_ANGLE,0);
		spritesetvalue(1,S_FLIP_HORIZONTAL,0);
		angle = 3;
		if(y > 10 && testBlock(x, y - 1) && testBlock(x + 7, y - 1)){
			y--;
			if(nosound == 0){
				loadrtttl(track, 0);
				playrtttl();
			}
		}
	}
	else if(key & KEY_DOWN){
		getsprite(1,yellowTank + (frame + 2) * 32);
		spritesetvalue(1,S_ANGLE,180);
		spritesetvalue(1,S_FLIP_HORIZONTAL,0);
		angle = 1;
		if(y < 120 && testBlock(x, y + 9)  && testBlock(x + 7, y + 9)){
			y++;
			if(nosound == 0){
				loadrtttl(track, 0);
				playrtttl();
			}
		}
	}
	else if(key & KEY_LEFT){
		getsprite(1,yellowTank + frame * 32);
		spritesetvalue(1,S_ANGLE,0);
		spritesetvalue(1,S_FLIP_HORIZONTAL,1);
		angle = 2;
		if(x > 0 && testBlock(x - 1, y) && testBlock(x - 1, y + 7)){
			x--;
			if(nosound == 0){
				loadrtttl(track, 0);
				playrtttl();
			}
		}
	}
	else if(key & KEY_RIGHT){
		getsprite(1,yellowTank + frame * 32);
		spritesetvalue(1,S_ANGLE,0);
		spritesetvalue(1,S_FLIP_HORIZONTAL,0);
		angle = 0;
		if(x < 110  && testBlock(x + 9, y) && testBlock(x + 9, y + 7)){
			x++;
			if(nosound == 0){
				loadrtttl(track, 0);
				playrtttl();
			}
		}
	}
	if(key & KEY_A && spritegetvalue(6,S_LIVES) == 0 && gettimer(1) == 0){
		settimer(1, 400);
		tone(2000,300);
		fire(6, angle, x, y);
	}
	if(map[138] == 0){
		isgame = 0;
	}
	if(spritegetvalue(1, S_COLLISION) == 14){
		thisbonus = spritegetvalue(14, S_LIVES);
		spritesetvalue(14, S_LIVES, 0);
		loadrtttl(bonussnd, 0);
		playrtttl();
		addScore(20);
		nosound = 1;
		if(thisbonus == 1){
			thisbonus = 0;
			power = power + 1;
			if(power > 3){
				if(life < 5){
					life++;
					drawLife();
				}
				power = 3;
			}
		}
		else if(thisbonus == 2){
			stoptime = 1;
			getbonustime = 10;
		}
		else if(thisbonus == 3){
			map[139] = 4;
			map[137] = 4;
			map[127] = 4;
			map[126] = 4;
			map[125] = 4;
			drawBlock(1, 5, 12);
			drawBlock(1, 7, 12);
			drawBlock(1, 5, 11);
			drawBlock(1, 6, 11);
			drawBlock(1, 7, 11);
			getbonustime = 16;
		}
		else if(thisbonus == 4){
			shield = 1;
			spritesetvalue(13,S_LIVES,1);
			getbonustime = 10;
		}
	}
	putsprite(1, x, y);
	getsprite(13, shieldspr[frame]);
	spritesetvalue(13, S_X, x);
	spritesetvalue(13, S_Y, y);
}

void nextAngle(int n){
	int s;
	s = n + 2;
	if(spritegetvalue(s, S_Y) > 110 && random(10)){
		if(random(1)){
			tAngle[n] = 0;
		}
		else{
			tAngle[n] = 2;
		}
	}
	else if(random(2) == 0 || tAngle[n] > 3){
		if(random(6)){
			tAngle[n] = random(3);
		}
		else{
			tAngle[n] = 1;
		}
	}
	if(tAngle[n] == 0){
		if(testBlock(spritegetvalue(s, S_X) + 12, spritegetvalue(s, S_Y) + 4)){
			setBlock(spritegetvalue(s, S_X) + 4, spritegetvalue(s, S_Y) + 4,0);
			setBlock(spritegetvalue(s, S_X) + 12, spritegetvalue(s, S_Y) + 4,20 + n);
			return;
		}
	}
	else if(tAngle[n] == 1){
		if(testBlock(spritegetvalue(s, S_X) + 4, spritegetvalue(s, S_Y) + 12)){
			setBlock(spritegetvalue(s, S_X) + 4, spritegetvalue(s, S_Y) + 4,0);
			setBlock(spritegetvalue(s, S_X) + 4, spritegetvalue(s, S_Y) + 12,20 + n);
			return;
		}
	}
	else if(tAngle[n] == 2){
		if(testBlock(spritegetvalue(s, S_X) - 4, spritegetvalue(s, S_Y) + 4)){
			setBlock(spritegetvalue(s, S_X) + 4, spritegetvalue(s, S_Y) + 4,0);
			setBlock(spritegetvalue(s, S_X) - 4, spritegetvalue(s, S_Y) + 4,20 + n);
			return;
		}
	}
	else if(tAngle[n] == 3){
		if(testBlock(spritegetvalue(s, S_X) + 4, spritegetvalue(s, S_Y) - 4)){
			setBlock(spritegetvalue(s, S_X) + 4, spritegetvalue(s, S_Y) + 4,0);
			setBlock(spritegetvalue(s, S_X) + 4, spritegetvalue(s, S_Y) - 4,20 + n);
			return;
		}
	}
	tAngle[n] = 4;
}

void aistep(){
	int i,s;
	setBlock(x + 4, y + 4, 30);
	for(i = 0; i < 4; i++){
		s = i + 2;
		if(spritegetvalue(s, S_LIVES)){
			if(gettimer(s) == 0 && spritegetvalue(i + 7, S_LIVES) == 0){
				settimer(s, 1000 + random(2000));
				fire(i + 7, tAngle[i], spritegetvalue(s, S_X), spritegetvalue(s, S_Y));
			}
			if(tAngle[i] == 0){
				if(spritegetvalue(s, S_LIVES) > 1){
					getsprite(s,bigTank + frame * 32);
				}
				else{
					getsprite(s,grayTank + frame * 32);
				}
				spritesetvalue(s,S_ANGLE,0);
				spritesetvalue(s,S_FLIP_HORIZONTAL,0);
				if(spritegetvalue(s, S_X) < 110){
					spritesetvalue(s, S_X,spritegetvalue(s, S_X) + 1);
				}
			}
			else if(tAngle[i] == 1){
				if(spritegetvalue(s, S_LIVES) > 1){
					getsprite(s,bigTank + (frame + 2) * 32);
				}
				else{
					getsprite(s,grayTank + (frame + 2) * 32);
				}
				spritesetvalue(s,S_ANGLE,180);
				spritesetvalue(s,S_FLIP_HORIZONTAL,0);
				if(spritegetvalue(s, S_Y) < 120){
					spritesetvalue(s, S_Y,spritegetvalue(s, S_Y) + 1);
				}
			}
			else if(tAngle[i] == 2){
				if(spritegetvalue(s, S_LIVES) > 1){
					getsprite(s,bigTank + frame * 32);
				}
				else{
					getsprite(s,grayTank + frame * 32);
				}
				spritesetvalue(s,S_ANGLE,0);
				spritesetvalue(s,S_FLIP_HORIZONTAL,1);
				if(spritegetvalue(s, S_X) > 0){
					spritesetvalue(s, S_X,spritegetvalue(s, S_X) - 1);
				}
			}
			else if(tAngle[i] == 3){
				if(spritegetvalue(s, S_LIVES) > 1){
					getsprite(s,bigTank + (frame + 2) * 32);
				}
				else{
					getsprite(s,grayTank + (frame + 2) * 32);
				}
				spritesetvalue(s,S_ANGLE,0);
				spritesetvalue(s,S_FLIP_HORIZONTAL,0);
				if(spritegetvalue(s, S_Y) > 10){
					spritesetvalue(s, S_Y,spritegetvalue(s, S_Y) - 1);
				}
			}
			if(spritegetvalue(s, S_X) % 10 == 0 && spritegetvalue(s, S_Y) % 10 == 0)
				nextAngle(i);
		}
	}
	setBlock(x + 4, y + 4, 0);
}

void setM(int j, int e){
	if(e == 2){
		map[j] = 2;
	}
	else if(e == 1){
		map[j] = 4;
	}
	else if(e == 3){
		map[j] = 15;
	}
	else if(e == 15){
		map[j] = 1;
	}
	else{
		map[j] = 0;
	}
}

void drawLevel(int l){
	int x,y,i,j,e;
	char a;
	x = 0;
	y = 1;
	j = 0;
	for(i = 0; i < 72; i++){
		a = *l;
		l=l+1;
		e = (a & 0xf0) >> 4;
		setM(j, e);
		drawBlock(e, x, y);
		x++;
		j++;
		e = (a & 0xf);
		setM(j, e);
		drawBlock(e, x, y);
		x++;
		j++;
		if(x >= 12){
			x = 0;
			y++;
			delayredraw();
		}
	}
	for(i = 0; i < tankCount; i++){
		putimage(tankico, 120, 10 + i * 7, 8, 5);
	}
}

void addBonus(){
	int x,y,r;
	x = random(11);
	y = random(10) + 1;
	r = random(3) + 1;
	bonustime = 12;
	spritesetvalue(14, S_LIVES, r);
	if(r == 1){
		getsprite(14, bonusstar);
	}
	else if(r == 2){
		getsprite(14, bonustimer);
	}
	else if(r == 3){
		getsprite(14, bonusshovel);
	}
	else if(r == 4){
		getsprite(14, bonusshield);
	}
	putsprite(14, x * 10, y * 10);	
}

void bulletstep(){
	int bx,by,b,s;
	if(spritegetvalue(6,S_LIVES)){
		bx = spritegetvalue(6,S_X);
		by = spritegetvalue(6,S_Y);
		if(bx < 0 || bx > 120 || by < 10 || by > 127){
			spritesetvalue(6,S_LIVES,0);
		}
		b = getBlock(bx + 1, by + 1);
		if(b > 0 && b < 6){
			spritesetvalue(6,S_LIVES,0);
			tone(100,300);
			if(b <= power * 2){
				drawRect(bx - 2, by - 2);
				b = b - power;
				if(b <= 0){
					b = 0;
					drawBlock(0, (bx + 1)/10, (by + 1)/10);
				}
				setBlock(bx + 1, by + 1, b);
			}
		}
		s = spritegetvalue(6,S_COLLISION);
		else if(s > 1 && s < 14){
			spritesetvalue(s,S_LIVES,spritegetvalue(s,S_LIVES) - power);
			spritesetvalue(6,S_LIVES,0);
			tone(500,300);
			if(spritegetvalue(s,S_LIVES) <= 0 && s < 6){
				nosound = 2;
				loadrtttl(boom, 0);
				playrtttl();
				tankCount--;
				putimagerle(grayico, 120, 10 + tankCount * 7, 8, 5);
				map[(tPosition[s - 2])] = 0;
				getsprite(16,explosion0);
				putsprite(16, bx - 7, by - 7);
				spritesetvalue(16, S_LIVES, 3);
				settimer(6, 200);
				if(tankCount == 14 || tankCount == 8 || tankCount == 3){
					addBonus();
				}
				addScore(10);
			}
			if(tankCount <= 0){
				isgame = 0;
			}
		}
	}
	if(gettimer(6) == 0 && spritegetvalue(16, S_LIVES) > 0){
		settimer(6, 200);
		spritesetvalue(16, S_LIVES, spritegetvalue(16, S_LIVES) - 1);
		getsprite(16,explosion[(3 - spritegetvalue(16, S_LIVES))]);
	}
}

void aibulletstep(){
	int i,b,bx,by;
	for(i = 7; i < 10; i++){
		if(spritegetvalue(i,S_LIVES)){
			bx = spritegetvalue(i,S_X);
			by = spritegetvalue(i,S_Y);
			if(bx < 0 || bx > 120 || by < 10 || by > 127){
				spritesetvalue(i,S_LIVES,0);
			}
			b = getBlock(bx + 1, by + 1);
			if(b > 0 && b < 6){
				spritesetvalue(i,S_LIVES,0);
				if(b <= 2){
					drawRect(bx - 2, by - 2);
					b = b - 1;
					if(b <= 0){
						b = 0;
						drawBlock(0, (bx + 1)/10, (by + 1)/10);
					}
					setBlock(bx + 1, by + 1, b);
				}
			}
			if(spritegetvalue(i,S_COLLISION) == 1){
				spritesetvalue(i,S_LIVES,0);
				if(shield == 0){
					nosound = 2;
					loadrtttl(boom, 0);
					playrtttl();
					getsprite(16,explosion0);
					putsprite(16, bx - 7, by - 7);
					spritesetvalue(16, S_LIVES, 3);
					settimer(6, 200);
					lifecount--;
					drawLife();
					if(lifecount <= 0){
						isgame = 0;
					}
					shield = 1;
					spritesetvalue(13,S_LIVES,1);
					thisbonus = 4;
					getbonustime = 4;
					power = 1;
					x = 40;
					y = 120;
				}
			}
		}
	}
}

void addTank(){
	int i,r;
	for(i = 2; i < 5; i++){
		if(spritegetvalue(i,S_LIVES) == 0){
			r = random(2);
			if(r == 0 && testBlock(4, 6)){
				putsprite(i, 0, 10);
				putsprite(15, 0, 10);
			}
			else if(r == 1 && testBlock(54, 6)){
				putsprite(i, 50, 10);
				putsprite(15, 50, 10);
			}
			else{
				putsprite(i, 110, 10);
				putsprite(15, 110, 10);
			}
			tAngle[i - 2] = 4;
			angartankCount--;
			if(angartankCount < (level + 2)){
				spritesetvalue(i, S_LIVES, 2);	
			}
			return();
		}
	}
}

void init(){
	int i;
	level = 0;
	frame = 0;
	lifecount = 3;
	respawntime = 1;
	power = 1;
	scoreforlife = 500;
	loadrtttl(introsnd, 1);
	playrtttl();
	getsprite(1,yellowTank + 64);
	spritesetvalue(1,S_WIDTH,8);
	spritesetvalue(1,S_HEIGHT,8);
	for(i = 2; i < 6; i++){
		getsprite(i,grayTank + 64);
		spritesetvalue(i,S_WIDTH,8);
		spritesetvalue(i,S_HEIGHT,8);
		spritesetvalue(i,S_ANGLE,180);
	}
	for(i = 6; i < 10; i++){
		getsprite(i,bullet);
		spritesetvalue(i,S_WIDTH,4);
		spritesetvalue(i,S_HEIGHT,3);
	}
	getsprite(14,bonusstar);
	spritesetvalue(14,S_WIDTH,8);
	spritesetvalue(14,S_HEIGHT,8);
	getsprite(15,respawnspr);
	spritesetvalue(15,S_WIDTH,8);
	spritesetvalue(15,S_HEIGHT,8);
	spritesetvalue(16,S_WIDTH,16);
	spritesetvalue(16,S_HEIGHT,16);
	getsprite(30,gameoverspr);
	spritesetvalue(30,S_WIDTH,22);
	spritesetvalue(30,S_HEIGHT,15);
	spritesetvalue(30,S_SPEEDY,-12);
	loaddata("tankcity", &maxscore);
	setbgcolor(11);
	setcolor(1);
	clearscreen();
	setimagesize(3);
	putimagerle(name, 16, 28, 32, 24);
	setimagesize(1);
	gotoxy(4,1);
	printf("Score     %d", score);
	gotoxy(4,2);
	printf("Max score %d", maxscore);
	gotoxy(4,14);
	printf("Press any key");
	score = 0;
	settimer(0, 1000);
	while(gettimer(0)){}
	while(getkey() == 0){}
}

void nextLevel(){
	int i;
	for(i = 0; i < 32; i++){
		spritesetvalue(i,S_LIVES,0);
	}
	x = 40;
	y = 120;
	thisbonus = 0;
	angle = 3;
	isgame = 1;
	tankCount = 16;
	angartankCount = 16;
	setbgcolor(12);
	clearscreen();
	spritesetvalue(1,S_LIVES,0);
	loadrtttl(sound, 0);
	playrtttl();
	nosound = 3;
	setcolor(0);
	gotoxy(7,8);
	printf("level %d", level + 1);
	settimer(0, 800);
	while(gettimer(0)){}
	gotoxy(3,0);
	putimage(flag, 4, 1, 10, 8);
	printf("%d  1P", level + 1);
	gotoxy(16,0);
	printf("%d ", score);
	if(level >= endmap){
		level = 0;
	}
	drawLevel(maps[level]);
	putsprite(1, x, y);
	drawLife();
	shield = 1;
	spritesetvalue(13,S_LIVES,1);
	thisbonus = 4;
	stoptime = 0;
	getbonustime = 4;
	level++;
	if(score > maxscore){
		maxscore = score;
		savedata("tankcity", &maxscore, 2);
	}
}

void gameOver(){
	int i;
	for(i = 0; i < 32; i++){
		spritesetvalue(i,S_LIVES,0);
	}
	if(score > maxscore){
		maxscore = score;
		savedata("tankcity", &maxscore, 2);
	}
	loadrtttl(endsnd, 0);
	playrtttl();
	putsprite(30, 52, 127);
	while(spritegetvalue(30, S_Y) > 56){}
	spritesetvalue(30,S_SPEEDY,0);
	settimer(0, 800);
	while(gettimer(0)){};
	spritesetvalue(30,S_LIVES,0);
}

void timers(){
	if(gettimer(7) == 0){
		settimer(7, 1000);
		respawntime--;
		bonustime--;
		getbonustime--;
		nosound--;
		if(nosound < 0){
			nosound = 0;
		}
		spritesetvalue(15, S_LIVES, 0);
		if(respawntime <= 0){
			respawntime = 3;
			if(angartankCount > 0){
				addTank();
			}
		}
		if(bonustime <= 0){
			spritesetvalue(14,S_LIVES,0);
			bonustime = 0;
		}
		if(getbonustime <= 0){
			getbonustime = 0;
			if(thisbonus == 2){
				stoptime = 0;
			}
			else if(thisbonus == 3){
				thisbonus = 1;
				map[139] = 2;
				map[137] = 2;
				map[127] = 2;
				map[126] = 2;
				map[125] = 2;
				drawBlock(2, 5, 12);
				drawBlock(2, 7, 12);
				drawBlock(2, 5, 11);
				drawBlock(2, 6, 11);
				drawBlock(2, 7, 11);
			}
			else if(thisbonus == 4){
				shield = 0;
				spritesetvalue(13,S_LIVES,0);
			}
		}
	}
}

void main(){
	init();
	while(1){
		nextLevel();
		while(isgame){
			timers();
			step();
			if(stoptime == 0){
				aistep();
			}
			bulletstep();
			aibulletstep();
			delayredraw();
		}
		if(tankCount > 0){
			gameOver();
			init();
		}
	}
}
